## [204. 计数质数](https://leetcode.cn/problems/count-primes/description/)

## 题目描述

给定整数 n ，返回 所有小于非负整数 n 的质数的数量 。

## 题目考点

数学

## 题解一（暴力枚举）

0 和 1 不是质数

质数是除了 1 和本身外没有因数的数，因此我们可以枚举 [1,n-1] 的所有数，检查是否是 x 的因数，时间复杂度是 O(n)

我们发现如果 [1,n-1] 中的 y 如果是因数，那么一定存在 x/y 也是因素，我们每次只要检查两者中的较小者，而较小者最大不会超过 x 的平方根。

所以我们可以缩小检查范围，只检查 [1,x 的平方根]

```
class Solution {
    fun countPrimes(n: Int): Int {
        var count = 0
        for (num in 2 until n) {
            // 检查是否为质数
            count += if (isPrime(num)) 1 else 0
        }
        return count
    }

    private fun isPrime(num: Int): Boolean {
        var index = 2
        while (index * index <= num) {
            if (num % index == 0) {
                return false
            }
            index++
        }
        return true
    }
}
```

**复杂度分析：**

- 时间复杂度：O(n·根号n)
- 空间复杂度：O(1) 

## 题解二（埃氏筛）

枚举没有考虑到数与数的关联性，因此难以再继续优化时间复杂度。

埃氏筛：如果 x 是质数，那么 x 的整数倍 2x、3x 一定不是质数。

我们设 isPrime[i] 表示 i 是否为质数，从小开始遍历，如果 i 是质数，则同时将所有倍数标记为合数。

可以继续优化：直接从 x * x 开始标记，因为 2x、3x、4x 等已经在处理 2 和 3 时标记过了。

```
class Solution {
    fun countPrimes(n: Int): Int {
        var count = 0
        // true：质数
        // false：合数
        val isPrime = BooleanArray(n) { true }
        // index：0 to n - 1
        // 只检查 2 to n - 1
        for (index in 2..n - 1) {
            // 检查是否为质数
            if (isPrime[index] && isPrime(index)) {
                count++
                // 将从 index * index 开始的整数倍标记位为合数
                if (index.toLong() * index > n) {
                    continue
                }
                var mulIndex = index * index
                while (mulIndex < n) {
                    isPrime[mulIndex] = false
                    mulIndex += index
                }
            }
        }
        return count
    }

    private fun isPrime(num: Int): Boolean {
        var index = 2
        while (index * index <= num) {
            if (num % index == 0) {
                return false
            }
            index++
        }
        return true
    }
}
```

**复杂度分析：**

- 时间复杂度：O(n·lglgn)
- 空间复杂度：O(n) 

## 题解三（线性筛）

```
```

**复杂度分析：**

- 时间复杂度：O(n)
- 空间复杂度：O(n) 
